<div class="container my-3">
    {% if update_title == 'Firewall' %}
    <button type="button" class="btn btn-primary my-3" id="update">
        {{ update_title + ' Update' }}
    </button>
    {% endif %}
    <table class="table">
    {% if data_list %}
        <thead>
            <tr class="table-dark">
                <th class="text-center align-middle">번호</th>
                {% for column in column_header %}
                <th class="text-center align-middle">{{ column.header }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for data in data_list %}
            <tr>
                <td class="text-center align-middle" onClick='handleClick(event, {{ data }}, {{ loop.index0 }})'>{{ paging.offset + loop.index0 + 1}}</td>
                {% for column in column_header %}
                {% if column['accessor'] == 'ip'%}
                <td class="text-center align-middle"><a href="{{ 'https://www.abuseipdb.com/check/' + data[column['accessor']] }}" target="_blank">{{ data[column['accessor']] }}</a></td>
                {% elif column['accessor'] == 'ticket' %}
                <td class="text-center align-middle"><a href="{{ url_for('main.history', ticket=data[column['accessor']]) }}">{{ data[column['accessor']] }}</a></td>
                {% else %}
                <td class="text-center align-middle">{{ data[column['accessor']] }}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    {% else %}
        <tr>
            <td colspan="3">{{ update_title + ' 정보가 없습니다.' }}</td>
        </tr>
    {% endif %}
    </table>
</div>

<!-- Modal -->
<div class="modal fade" id="modalForm" tabindex="-1" aria-labelledby="modalFormLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold" id="modalFormLabel">{{ update_title }}</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="post" class="fw-form" id="fw-form">
                    {{ form.csrf_token }}
                    {% include 'form_errors.html' %}
                    <div class="form-group my-3">
                        <input type="hidden" class="form-control" name="no" id="no" value="{{ '' }}">
                    </div>
                    {% for field in form %}
                    <div class="form-group my-3">
                        {% if field.id not in ['csrf_token', 'id'] %}
                        {{ field.label }}
                        {% endif %}
                        {% if field.id not in ['csrf_token', 'id'] %}
                        {{ field(class_='form-control') }}
                        {% elif field.id in ['id'] %}
                        {{ field(type='hidden', class_='form-control') }}
                        {% endif %}
                    </div>
                    {% endfor %}    
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btn-save">Save changes</button>
                <button type="button" class="btn btn-primary" id="btn-delete">Delete</button>
            </div>
        </div>
    </div>
</div>
